$(function(){function getVideoEmbedUrl(url,additionalParams){var embedUrl;switch(!0){case/^https?:\/\/(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/.test(url):embedUrl=convertYoutubeUrlToEmbedUrl(url,{autoplay:1});break;case/^https?:\/\/(?:www\.)?vimeo\.com\/(\w+)/.test(url):embedUrl=convertVimeoUrlToEmbedUrl(url,{autoplay:1})}return embedUrl}function convertYoutubeUrlToEmbedUrl(url,additionalParams){var videoId=url.match(/^https?:\/\/(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/),params=url.match(/\?(.*)#?$/),embedUrl="https://youtube.com/embed/"+videoId[1];return params&&(params=params[1].split("&").reduce(function(obj,param){var pair=param.split("=");if("v"!==pair[0])switch(pair[0]){case"t":obj.start=/^\d+$/.test(pair[1])?pair[1]:60*pair[1].split("m")[0]+parseInt(pair[1].split("m")[1],10);break;default:obj[pair[0]]=pair[1]}return obj},{}),additionalParams&&(params=$.extend(params,additionalParams)),params=Object.keys(params).reduce(function(arr,key){return arr.push(key+"="+params[key]),arr},[]),params&&(embedUrl=embedUrl+"?"+params.join("&"))),embedUrl}function convertVimeoUrlToEmbedUrl(url,additionalParams){var idMatch,params,embedUrl="https://player.vimeo.com/video/";return(idMatch=url.match(/^https?:\/\/(?:www\.)?vimeo\.com\/(\w+)/))?(embedUrl+=idMatch[1],additionalParams&&(params=Object.keys(additionalParams).map(function(key){return key+"="+additionalParams[key]}),params&&(embedUrl=embedUrl+"?"+params.join("&"))),embedUrl):!1}function fitDimensions(yAspectRatio,xAspectRatio,maxWidth,maxHeight){var width,height;return maxHeight>maxWidth*yAspectRatio?(width=maxWidth,height=maxWidth*yAspectRatio):(width=maxHeight*xAspectRatio,height=maxHeight),{width:width,height:height}}var isMobile;isMobile=function(){return window.matchMedia("screen and (max-width: 767px)").matches},window.ism=isMobile,$("body").addClass("loaded"),$(".fancybox").fancybox(),$(".body-header").on("click","a[data-toggle]",function(e){e.preventDefault()}),$(".h-large-databricks-logo").each(function(){var $this=$(this);setTimeout(function(){$this.addClass("show-bricks")},500)}),$(".body-header .navbar-left, .body-header .navbar-right").each(function(){var $items,itemWidth,totalItems,$nav=$(this),mobileLinks=[];$nav.find("> li").add($nav.siblings(".navbar-right").first().find("> li.add-to-menu")).each(function(i,li){var $li=$(li);0==$li.find(".dropdown-menu").length&&(mobileLinks.push($li.clone(!0)),$li.addClass("hidden-xs"))}),mobileLinks.length>0&&($mobileLinksContainer=$("<li/>",{"class":"menu-item menu-item-has-children visible-xs"}),$mobileLinksContainer.html('<a href="#" class="dropdown-toggle">Links</a><ul class="dropdown-menu"></ul>'),$(mobileLinks).each(function(i,li){$mobileLinksContainer.find("ul").append(li)}),$nav.append($mobileLinksContainer)),$items=$nav.children("li:not(.hidden-xs)"),itemWidth=$items.first().width(),totalItems=$items.length,$nav.css("width",totalItems*itemWidth),Modernizr.touch||($nav.addClass("allow-dropdown-hover"),$nav.find(".dropdown").each(function(i,dropdown){var url=$(dropdown).find(".dropdown-menu a").first().attr("href");$(dropdown).find("> .dropdown-toggle").attr("href",url)}),$nav.on("click",".dropdown-toggle",function(e){window.location=$(this).attr("href")}))}),$(document).on("click","a[data-scroll-to]",function(e){var scrollTo=$(this).attr("data-scroll-to");e.preventDefault(),scrollTo||(scrollTo=$(this).attr("href")),$("html, body").animate({scrollTop:$(scrollTo).offset().top})}),$(document).on("click","[data-toggle-active]",function(e){e.preventDefault();var $this=$(this),$siblings=$('[data-toggle-active="'+$this.data("toggle-active")+'"]').not($this);$this.toggleClass("active"),$siblings.removeClass("active")}),$(".js-hover-tabs > li > a").hover(function(){$(this).tab("show")}),$(document).on("click","a:not(.video-play)",function(e){var $modal,videoUrl=$(this).attr("href"),embedUrl=getVideoEmbedUrl(videoUrl,{autoplay:1});embedUrl&&(e.preventDefault(),$modal=$(Handlebars.compile($("#template-video-modal").html())({url:embedUrl})),$modal.one("show.bs.modal",function(){var $iframe=$(this).find("iframe"),xAspectRatio=$iframe.attr("width")/$iframe.attr("height"),yAspectRatio=$iframe.attr("height")/$iframe.attr("width"),maxWidth=.9*$(window).innerWidth(),maxHeight=.9*$(window).innerHeight(),dimensions=fitDimensions(yAspectRatio,xAspectRatio,maxWidth,maxHeight);$("html").addClass("animations-paused"),$(this).find(".modal-dialog").css({width:dimensions.width,height:dimensions.height})}).one("hide.bs.modal",function(){$("html").removeClass("animations-paused")}).one("hidden.bs.modal",function(){$(this).remove()}),$modal.modal("show"))}),$(document).on("click",".js-video-replace",function(e){e.preventDefault();var type,videoId,embedUrl,$trigger=$(this),$target=$($(this).attr("data-target")),width=$(this).attr("data-width")||560,height=$(this).attr("data-height")||315;switch(!0){case!!$trigger.attr("data-youtube-id"):type="youtube",videoId=$trigger.attr("data-youtube-id");break;default:type=!1}if(type){switch(type){case"youtube":embedUrl="https://www.youtube.com/embed/"+videoId+"?autoplay=1&"+$trigger.attr("data-options")}$target.html('<iframe width="'+width+'" height="'+height+'" src="'+embedUrl+'" frameborder="0" allowfullscreen></iframe>')}});var supportedEventTrackingTypes=[{name:"click",selector:"[data-track-event='click'],[data-track-event-category][data-track-event-action]:not([data-track-event]),a[href*='.pdf']",handler:function(e){var $this=$(this),category=$this.data("track-event-category"),action=$this.data("track-event-action"),label=$this.data("track-event-label"),value=$this.data("track-event-value"),url=$this.attr("href"),target=$this.attr("target"),isPDF=/\.pdf([\?|#].*)?$/.test(url);(!category&&!action||isPDF)&&(e.preventDefault(),isPDF&&(category=category||"Files",action=action||"Download",label=label||function(){var matches=url.match(/\/(\w+\.pdf).*?$/);return matches?matches[1]:!1}()||"PDF"),"_blank"===target&&window.open(url),ga("send",{hitType:"event",eventCategory:category,eventAction:action,eventLabel:label,eventValue:value,hitCallback:function(){"_blank"!==target&&(window.location=url)}}))}}];$.each(supportedEventTrackingTypes,function(i,evt){$(document).on(evt.name,evt.selector,evt.handler)}),$(".js-faq-section").each(function(){var $collapses=$(this).find(".collapse"),collapseState={};$collapses.each(function(){collapseState[$(this).attr("id")]=$(this).hasClass("in")?"open":"closed"}),$(this).data("collapseState",collapseState)}),$(document).on("click",".js-faq-open-all",function(e){e.preventDefault(),$(this).trigger("faq:open:all")}),$(document).on("click",".js-faq-close-all",function(e){e.preventDefault(),$(this).trigger("faq:close:all")}),$(document).on("faq:open:all",".js-faq-section",function(){var $collapses=$(this).find(".collapse");$collapses.not(".in").collapse("show")}),$(document).on("faq:close:all",".js-faq-section",function(){var $collapses=$(this).find(".collapse");$collapses.filter(".in").collapse("hide")}),$(document).on("show.bs.collapse",".js-faq-section",function(e){e.preventDefault();var $collapse=$(e.target),$openControl=$(this).find(".js-faq-open-all"),$closeControl=$(this).find(".js-faq-close-all");$collapse.addClass("in"),$(this).find("a[href=#"+$collapse.attr("id")+"]").removeClass("collapsed"),$(this).data("collapseState")[$collapse.attr("id")]="open",$.each($(this).data("collapseState"),function(id,state){return"open"===state?($closeControl.show(),!1):void $closeControl.hide()}),$.each($(this).data("collapseState"),function(id,state){return"closed"===state?($openControl.show(),!1):void $openControl.hide()})}),$(document).on("hide.bs.collapse",".js-faq-section",function(e){e.preventDefault();var $collapse=$(e.target),$closeControl=$(this).find(".js-faq-close-all"),$openControl=$(this).find(".js-faq-open-all");$collapse.removeClass("in"),$(this).find("a[href=#"+$collapse.attr("id")+"]").addClass("collapsed"),$(this).data("collapseState")[$collapse.attr("id")]="closed",$.each($(this).data("collapseState"),function(id,state){return"closed"===state?($openControl.show(),!1):void 0}),$.each($(this).data("collapseState"),function(id,state){"closed"===state&&$closeControl.show(),$closeControl.hide()})}),$(".js-breadcrumb-nav").each(function(){var $nav=$(this),scrollOffset=$(this).height()+$("#wpadminbar").height()+$("#breadcrumbs").height()+30;$(".js-breadcrumb-anchor").each(function(i){var id=$(this).attr("id"),label=$(this).attr("data-label");$nav.find(".js-breadcrumb-nav-links").append('<li><a href="#'+id+'">'+label+"</a></li>")}),$(this).parent(".breadcrumb-nav-container").css("height",$(this).height()),$(this).affix({offset:{top:$(this).offset().top-$("#wpadminbar").height()-$("#breadcrumbs").height()}}),$("body").scrollspy({target:".js-breadcrumb-nav",offset:scrollOffset}),$(this).on("click","a[href^='#']",function(e){e.preventDefault();var id=$(this).attr("href");$("html, body").animate({scrollTop:$(id).offset().top-scrollOffset+1})})}),Modernizr.touch&&$(".snippet_pricing_table").on("touchend.swipeclass",function(){$(this).addClass("swiped"),$(this).off("touchend.swipeclass")}),$(".snippet_team_listing").each(function(){var $snippet=$(this),$authors=$snippet.find(".author"),$avatars=$authors.find(".avatar");$(window).on("resize",function(){$avatars.css({height:$authors.first().width()})}).trigger("resize"),$authors.waypoint({offset:"100%",handler:function(){var $img=$(this.element).find("img[data-lazyload]"),src=$img.data("lazyload"),preloadImg=$("<img/>");preloadImg.on("load",function(){$img.attr("src",src).addClass("loaded")}).attr("src",src)}})}).on("click",".author",function(e){Modernizr.touch&&$(this).addClass("active").siblings().removeClass("active")}),$("#home-hero-carousel").on("click",".video-play",function(e){e.preventDefault();var $videoPane,$carousel=$("#home-hero-carousel"),$slide=$carousel.find(".item.active"),videoPaneDimensions=fitDimensions(9/16,16/9,$slide.innerWidth()-100,$slide.innerHeight()-30),videoUrl=$(this).attr("href"),embedUrl=getVideoEmbedUrl(videoUrl,{autoplay:1});embedUrl&&($videoPane=$(Handlebars.compile($("#template-home-hero-video-pane").html())({url:getVideoEmbedUrl(videoUrl,{autoplay:1})})),$carousel.carousel("pause"),$videoPane.css({width:videoPaneDimensions.width,height:videoPaneDimensions.height,marginTop:-videoPaneDimensions.height/2,marginLeft:-videoPaneDimensions.width/2}),$carousel.one("transitionend",function(){$videoPane.find("iframe").one("load",function(){$("html").addClass("animations-paused"),$videoPane.addClass("video-loaded")}),$videoPane.appendTo($slide)}),$carousel.addClass("video-playing"))}),$("#home-hero-carousel").on("click",".video-close",function(e){var $carousel=$("#home-hero-carousel"),$videoPane=$carousel.find(".video-pane");$videoPane.one("transitionend",function(){$("html").removeClass("animations-paused"),$carousel.removeClass("video-playing"),$videoPane.remove()}),$videoPane.removeClass("video-loaded")})});
//# sourceMappingURL=../maps/js/main.js.map